"use strict";(self.webpackChunklcdb=self.webpackChunklcdb||[]).push([[608],{8608:function(pt,q,s){s.r(q),s.d(q,{GuestLayoutModule:function(){return st}});var f=s(3144),m=s(5671),l=s(2619),p=s(9808),d=s(2382),Q=s(9841),t=s(8003),_=s(520),T=function(){var n=function(){function r(e){(0,m.Z)(this,r),this.http=e}return(0,f.Z)(r,[{key:"query",value:function(i){var u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.http.post("http://localhost/graphql/guest",{query:i,variables:u,operationName:a},{headers:new _.WM({accept:"application/json","content-type":"application/json"})})}}]),r}();return n.\u0275fac=function(e){return new(e||n)(t.LFG(_.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n}(),b=function(r){return{"year-link-active":r}},x=function(r){return{year:r}};function P(n,r){if(1&n&&(t.TgZ(0,"a",16),t._uU(1),t.qZA()),2&n){var e=r.$implicit,i=t.oxw(2);t.MGl("routerLink","/guest/artist/",i.graphQLArtist.data.artist.id,""),t.Q6J("ngClass",t.VKq(4,b,e===i.year))("queryParams",t.VKq(6,x,e)),t.xp6(1),t.hij(" ",e," ")}}function U(n,r){if(1&n&&(t.TgZ(0,"a",20),t._uU(1),t.qZA()),2&n){var e=r.$implicit;t.MGl("routerLink","/guest/source/",e.node.id,""),t.Q6J("title",e.node.comments),t.xp6(1),t.hij(" ",e.node.id," ")}}function k(n,r){if(1&n&&(t.TgZ(0,"tr")(1,"td",21)(2,"div",22)(3,"div",2)(4,"div",23)(5,"b"),t._uU(6,"Set 1"),t.qZA(),t._UZ(7,"br"),t._uU(8),t.qZA(),t.TgZ(9,"div",23)(10,"b"),t._uU(11,"Set 2"),t.qZA(),t._UZ(12,"br"),t._uU(13),t.qZA(),t.TgZ(14,"div",23)(15,"b"),t._uU(16,"Set 3"),t.qZA(),t._UZ(17,"br"),t._uU(18),t.qZA(),t.TgZ(19,"div",23)(20,"b"),t._uU(21,"Comment"),t.qZA(),t._UZ(22,"br"),t._uU(23),t.qZA()()()()()),2&n){var e=t.oxw().$implicit;t.xp6(8),t.hij(" ",e.node.set1," "),t.xp6(5),t.hij(" ",e.node.set2," "),t.xp6(5),t.hij(" ",e.node.set3," "),t.xp6(5),t.hij(" ",e.node.comment," ")}}function S(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"tr")(2,"td")(3,"a",17),t._uU(4),t.ALo(5,"slice"),t.ALo(6,"slice"),t.qZA()(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t.YNc(14,U,2,3,"a",18),t.qZA()(),t.YNc(15,k,24,4,"tr",19),t.BQk()),2&n){var e=r.$implicit,i=t.oxw(2);t.xp6(3),t.MGl("routerLink","/guest/performance/",e.node.id,""),t.xp6(1),t.lnq(" ",e.node.year,"-",t.Dn7(5,9,e.node.date,0,2),"-",t.Dn7(6,13,e.node.date,3,5)," "),t.xp6(4),t.Oqu(e.node.venue),t.xp6(2),t.Oqu(e.node.city),t.xp6(2),t.Oqu(e.node.state),t.xp6(2),t.Q6J("ngForOf",e.node.sources.edges),t.xp6(1),t.Q6J("ngIf",i.showSets)}}function J(n,r){if(1&n){var e=t.EpF();t.TgZ(0,"div",5)(1,"div",6)(2,"p",7),t._uU(3),t.TgZ(4,"a",8),t.NdJ("click",function(){t.CHM(e);var a=t.oxw();return a.showSets=!a.showSets}),t._uU(5,"Show Sets"),t.qZA()(),t.TgZ(6,"p",9),t.YNc(7,P,2,8,"a",10),t.qZA()(),t.TgZ(8,"div",11)(9,"div",11)(10,"div",12)(11,"table",13)(12,"thead",14)(13,"th"),t._uU(14," Date "),t.qZA(),t.TgZ(15,"th"),t._uU(16," Venue "),t.qZA(),t.TgZ(17,"th"),t._uU(18," City "),t.qZA(),t.TgZ(19,"th"),t._uU(20," State "),t.qZA(),t.TgZ(21,"th"),t._uU(22," Sources "),t.qZA()(),t.TgZ(23,"tbody"),t.YNc(24,S,16,17,"ng-container",15),t.qZA()()()()()()}if(2&n){var i=t.oxw();t.xp6(3),t.hij(" ",i.graphQLArtist.data.artist.name," "),t.xp6(4),t.Q6J("ngForOf",i.graphQLArtist.data.artistYears),t.xp6(17),t.Q6J("ngForOf",i.graphQLArtist.data.artist.performances.edges)}}var M=function(){var n=function(){function r(e,i,u){var a=this;(0,m.Z)(this,r),this.route=e,this.guestGraphQLService=i,this.router=u,this.query='\n    query Artist($id: Int!, $year: Int = 2022) {\n      artistYears(id: $id)\n\n      artist (id: $id) {\n        id\n        name\n        performances (filter: {year: $year date_sort: "ASC"}) {\n          edges {\n            node {\n              id\n              date\n              year\n              venue\n              city\n              state\n              set1\n              set2\n              set3\n              comment\n              sources {\n                edges {\n                  node {\n                    id\n                    comments\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  ',this.latestYearQuery="\n    query Artist($id: Int!) {\n      artistLatestYear(id: $id)\n    }\n  ",this.artistId=0,this.graphQLArtist=null,this.years=[],this.showSets=!1,(0,Q.a)(this.route.params,this.route.queryParams,function(o,g){return Object.assign(Object.assign({},o),g)}).subscribe(function(o){o.year?a.guestGraphQLService.query(a.query,{id:Number(o.id),year:Number(o.year)}).subscribe(function(g){a.graphQLArtist=g,a.year=Number(o.year)}):a.guestGraphQLService.query(a.latestYearQuery,{id:Number(o.id)}).subscribe(function(g){a.router.navigate(["/guest/artist/"+o.id],{queryParams:{year:g.data.artistLatestYear}})})})}return(0,f.Z)(r,[{key:"ngOnInit",value:function(){}}]),r}();return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(T),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-artist"]],decls:5,vars:1,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],["class","card",4,"ngIf"],[1,"card"],[1,"card-header","card-header-warning"],[1,"card-title","h3"],[1,"float-right","btn","btn-info","btn-sm",3,"click"],[1,"card-category"],["class","year-link",3,"ngClass","routerLink","queryParams",4,"ngFor","ngForOf"],[1,"card-body"],[1,"table-responsive"],[1,"table"],[1,"text-primary"],[4,"ngFor","ngForOf"],[1,"year-link",3,"ngClass","routerLink","queryParams"],[3,"routerLink"],[3,"title","routerLink",4,"ngFor","ngForOf"],[4,"ngIf"],[3,"title","routerLink"],["colspan","5"],[1,"container"],[1,"col-md-3"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t.YNc(4,J,25,3,"div",4),t.qZA()()()()),2&e&&(t.xp6(4),t.Q6J("ngIf",i.graphQLArtist))},directives:[p.O5,p.sg,l.yS,p.mk],pipes:[p.OU],styles:[".year-link[_ngcontent-%COMP%]{padding-right:1em}.year-link-active[_ngcontent-%COMP%]{text-decoration:underline}"]}),n}(),L=function(r){return{"alphabet-active":r}},C=function(){return["/guest/artists"]},N=function(r){return{chr:r}};function O(n,r){if(1&n&&(t.TgZ(0,"a",13),t._uU(1),t.qZA()),2&n){var e=r.index,i=t.oxw();t.Q6J("ngClass",t.VKq(4,L,i.chr===i.getAlphabetLetter(e,!1)))("routerLink",t.DdM(6,C))("queryParams",t.VKq(7,N,i.getAlphabetLetter(e,!1))),t.xp6(1),t.hij(" ",i.getAlphabetLetter(e,!0)," ")}}var Z=function(r,e){return{chr:r,page:e}};function F(n,r){if(1&n&&(t.TgZ(0,"a",15),t._uU(1," < PREV "),t.qZA()),2&n){var e=t.oxw(2);t.Q6J("queryParams",t.WLB(1,Z,e.chr,e.page-1))}}var I=function(r){return{"pagination-link-active":r}};function w(n,r){if(1&n&&(t.ynx(0),t.TgZ(1,"a",21),t._uU(2),t.qZA(),t.BQk()),2&n){var e=r.$implicit,i=t.oxw(2);t.xp6(1),t.Q6J("queryParams",t.WLB(3,Z,i.chr,e))("ngClass",t.VKq(6,I,e===i.page)),t.xp6(1),t.hij(" ",e," ")}}function G(n,r){if(1&n&&(t.TgZ(0,"a",15),t._uU(1," NEXT > "),t.qZA()),2&n){var e=t.oxw(2);t.Q6J("queryParams",t.WLB(1,Z,e.chr,e.page+1))}}var Y=function(r){return{chr:r,page:1}};function $(n,r){if(1&n){var e=t.EpF();t.TgZ(0,"p",14)(1,"a",15),t._uU(2," |< FIRST "),t.qZA(),t.YNc(3,F,2,4,"a",16),t.YNc(4,w,3,8,"ng-container",17),t.YNc(5,G,2,4,"a",16),t.TgZ(6,"a",15),t._uU(7," LAST |> "),t.qZA(),t._uU(8," Jump to page "),t.TgZ(9,"input",18),t.NdJ("change",function(){return t.CHM(e),t.oxw().jumpToPage()})("ngModelChange",function(a){return t.CHM(e),t.oxw().pageJump=a}),t.qZA(),t._uU(10),t._UZ(11,"br"),t.TgZ(12,"span",19)(13,"a",20),t._uU(14),t.qZA(),t._uU(15," to "),t.TgZ(16,"a",20),t._uU(17),t.qZA()()()}if(2&n){var i=t.oxw();t.xp6(1),t.Q6J("queryParams",t.VKq(12,Y,i.chr)),t.xp6(2),t.Q6J("ngIf",i.graphQLArtists.data.artists.pageInfo.hasPreviousPage),t.xp6(1),t.Q6J("ngForOf",i.pages),t.xp6(1),t.Q6J("ngIf",i.graphQLArtists.data.artists.pageInfo.hasNextPage),t.xp6(1),t.Q6J("queryParams",t.WLB(14,Z,i.chr,i.maxPage)),t.xp6(3),t.s9C("max",i.maxPage),t.Q6J("ngModel",i.pageJump),t.xp6(1),t.hij(" of ",i.maxPage," "),t.xp6(3),t.MGl("routerLink","/guest/artist/",i.graphQLArtists.data.artists.edges[0].node.id,""),t.xp6(1),t.hij(" ",i.graphQLArtists.data.artists.edges[0].node.name," "),t.xp6(2),t.MGl("routerLink","/guest/artist/",i.graphQLArtists.data.artists.edges[i.graphQLArtists.data.artists.edges.length-1].node.id,""),t.xp6(1),t.hij(" ",i.graphQLArtists.data.artists.edges[i.graphQLArtists.data.artists.edges.length-1].node.name," ")}}function j(n,r){1&n&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",2)(3,"div",3),t._uU(4," No results found "),t.qZA()()()())}function D(n,r){if(1&n&&(t.TgZ(0,"a",26),t._uU(1),t.qZA()),2&n){var e=r.$implicit;t.MGl("routerLink","/guest/artist/",e.node.id,""),t.xp6(1),t.hij("",e.node.name," ")}}function V(n,r){if(1&n&&(t.TgZ(0,"a",26),t._uU(1),t.qZA()),2&n){var e=r.$implicit;t.MGl("routerLink","/guest/artist/",e.node.id,""),t.xp6(1),t.hij("",e.node.name," ")}}function B(n,r){if(1&n&&(t.TgZ(0,"a",26),t._uU(1),t.qZA()),2&n){var e=r.$implicit;t.MGl("routerLink","/guest/artist/",e.node.id,""),t.xp6(1),t.hij("",e.node.name," ")}}function H(n,r){if(1&n&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",2)(3,"div",24),t.YNc(4,D,2,2,"a",25),t.qZA(),t.TgZ(5,"div",24),t.YNc(6,V,2,2,"a",25),t.qZA(),t.TgZ(7,"div",24),t.YNc(8,B,2,2,"a",25),t.qZA()()()()),2&n){var e=t.oxw();t.xp6(4),t.Q6J("ngForOf",e.column(1)),t.xp6(2),t.Q6J("ngForOf",e.column(2)),t.xp6(2),t.Q6J("ngForOf",e.column(3))}}var K=function(){return{chr:"top100"}},W=function(){return[]},z=function(){return{chr:"other"}},E=function(){var n=function(){function r(e,i,u){var a=this;(0,m.Z)(this,r),this.activatedRoute=e,this.guestGraphQLService=i,this.router=u,this.query='\n    query ArtistList($chr: String = "a", $after: String = "LTE=") {\n      artists (filter: { name_sort: "ASC", name_startswith: $chr, _after: $after }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  ',this.top100query='\n    {\n      artists (filter: { name_sort: "ASC", top100: true }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n    ',this.otherQuery='\n    query ArtistList($after: String = "LTE=") {\n      artists (filter: { name_sort: "ASC", _after: $after }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  ',this.filterQuery='\n    query ArtistList($filter: String = "a", $after: String = "LTE=") {\n      artists (filter: { name_sort: "ASC", name_contains: $filter, _after: $after }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  ',this.chr="top100",this.page=1,this.pages=[],this.maxPage=1,this.pageJump=1,this.filterString="",this.activatedRoute.queryParamMap.subscribe(function(c){a.graphQLArtists=null,c.get("chr")&&(a.chr=c.get("chr")),a.page=c.get("page")?Number(c.get("page")):1,c.get("filterString")?(a.chr="filter",a.filterString=c.get("filterString")):a.filterString="",a.pageJump=a.page;var o={},g="";switch(a.chr){case"filter":o.filter=a.filterString,o.after=btoa(String(300*(a.page-1)-1)),g=a.filterQuery;break;case"top100":g=a.top100query;break;case"other":o._artists_other=!0,o.after=btoa(String(300*(a.page-1)-1)),g=a.otherQuery;break;default:o.chr=a.chr,o.after=btoa(String(300*(a.page-1)-1)),g=a.query}a.guestGraphQLService.query(g,o).subscribe(function(y){a.graphQLArtists=y,a.pages=[];for(var v=a.page;v>=a.page-2;v--)v&&v>0&&a.pages.push(v);for(var A=a.page+1;A<=a.page+4;A++)300*Math.ceil(y.data.artists.totalCount/300)-300*A>=0&&!a.pages.includes(A)&&a.pages.length<5&&a.pages.push(A);for(var h=a.page;h>5&&(300*Math.ceil(y.data.artists.totalCount/300)-300*h>=0&&h>=1&&!a.pages.includes(h)&&a.pages.length<5&&a.pages.push(h),5!==a.pages.length);h--);a.maxPage=Math.ceil(y.data.artists.totalCount/300),a.pages.sort(function(gt,ct){return gt-ct})})})}return(0,f.Z)(r,[{key:"ngOnInit",value:function(){}},{key:"jumpToPage",value:function(){this.pageJump>this.maxPage&&(this.pageJump=this.maxPage),this.pageJump<1&&(this.pageJump=1),this.router.navigate(["/guest/artists"],{queryParams:{chr:this.chr,page:this.pageJump,filterString:this.filterString}})}},{key:"filter",value:function(){this.router.navigate(["/guest/artists"],{queryParams:{chr:"filter",filterString:this.filterString}})}},{key:"column",value:function(i){var a=Math.ceil(this.graphQLArtists.data.artists.edges.length/3);switch(i){case 1:return this.graphQLArtists.data.artists.edges.slice(0,a);case 2:return this.graphQLArtists.data.artists.edges.slice(a,2*a);case 3:return this.graphQLArtists.data.artists.edges.slice(2*a)}}},{key:"getAlphabetLetter",value:function(i){var u=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=u?65:97;return String.fromCharCode(i+a)}}]),r}();return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.gz),t.Y36(T),t.Y36(l.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-artists"]],decls:19,vars:20,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-warning"],[1,"card-title"],[1,"alphabet",3,"routerLink","queryParams","ngClass"],["class","alphabet",3,"ngClass","routerLink","queryParams",4,"ngFor","ngForOf"],[1,"alphabet-link"],["type","text",2,"width","15em",3,"ngModel","change","ngModelChange"],["class","card-category",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"alphabet",3,"ngClass","routerLink","queryParams"],[1,"card-category"],["routerLink","/guest/artists",1,"pagination-link",3,"queryParams"],["routerLink","/guest/artists","class","pagination-link",3,"queryParams",4,"ngIf"],[4,"ngFor","ngForOf"],["type","number","min","1",2,"width","3em",3,"max","ngModel","change","ngModelChange"],[1,"pagination-link"],[3,"routerLink"],["routerLink","/guest/artists",1,"pagination-link",3,"queryParams","ngClass"],[1,"card-body"],[1,"container"],[1,"col-md-4"],["style","display: block",3,"routerLink",4,"ngFor","ngForOf"],[2,"display","block",3,"routerLink"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p",6)(7,"a",7),t._uU(8," top 100 "),t.qZA(),t.YNc(9,O,2,9,"a",8),t.TgZ(10,"a",7),t._uU(11," other "),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"span",9),t._uU(14," Filter "),t.TgZ(15,"input",10),t.NdJ("change",function(){return i.filter()})("ngModelChange",function(a){return i.filterString=a}),t.qZA()()(),t.YNc(16,$,18,17,"p",11),t.qZA(),t.YNc(17,j,5,0,"div",12),t.YNc(18,H,9,3,"div",12),t.qZA()()()()()),2&e&&(t.xp6(7),t.Q6J("routerLink",t.DdM(11,C))("queryParams",t.DdM(12,K))("ngClass",t.VKq(13,L,"top100"===i.chr)),t.xp6(2),t.Q6J("ngForOf",t.DdM(15,W).constructor(26)),t.xp6(1),t.Q6J("routerLink",t.DdM(16,C))("queryParams",t.DdM(17,z))("ngClass",t.VKq(18,L,"other"===i.chr)),t.xp6(5),t.Q6J("ngModel",i.filterString),t.xp6(1),t.Q6J("ngIf",i.graphQLArtists&&(i.graphQLArtists.data.artists.pageInfo.hasNextPage||i.graphQLArtists.data.artists.pageInfo.hasPreviousPage)),t.xp6(1),t.Q6J("ngIf",i.graphQLArtists&&!i.graphQLArtists.data.artists.totalCount),t.xp6(1),t.Q6J("ngIf",i.graphQLArtists&&i.graphQLArtists.data.artists.totalCount))},directives:[l.yS,p.mk,p.sg,d.Fj,d.JJ,d.On,p.O5,d.qQ,d.Fd,d.wV],styles:[".alphabet[_ngcontent-%COMP%]{padding-right:1em;font-weight:700}.alphabet-active[_ngcontent-%COMP%]{text-decoration:underline}.pagination-link[_ngcontent-%COMP%]{padding-right:1em}.pagination-link-active[_ngcontent-%COMP%]{text-decoration:underline}"]}),n}(),R=[{component:function(){var n=function(){function r(){(0,m.Z)(this,r)}return(0,f.Z)(r,[{key:"ngOnInit",value:function(){}}]),r}();return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:17,vars:0,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-warning"],[1,"card-title"],[1,"card-body"],["href","https://etreedb.org"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t._uU(7," Welcome to the Live Concert Database [LCDB]. "),t.qZA()(),t.TgZ(8,"div",7)(9,"p"),t._uU(10," This website will replace "),t.TgZ(11,"a",8),t._uU(12,"etreedb.org"),t.qZA(),t._uU(13," in time. While this process is taking place this website will use the exact same database as "),t.TgZ(14,"a",8),t._uU(15,"etreedb.org"),t.qZA(),t._uU(16," so all changes on each site will be reflected in each other. "),t.qZA()()()()()()())},styles:[""]}),n}(),path:"home"},{component:E,path:"artists"},{component:M,path:"artist/:id"}],tt=s(7423),et=s(7531),nt=s(508),at=s(7322),rt=s(9772),it=s(4107),st=function(){var n=(0,f.Z)(function r(){(0,m.Z)(this,r)});return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[p.ez,l.Bz.forChild(R),d.u5,d.UX,tt.ot,nt.si,at.lN,et.c,it.LD,rt.AV]]}),n}()}}]);