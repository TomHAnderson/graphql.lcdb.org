"use strict";(self.webpackChunklcdb=self.webpackChunklcdb||[]).push([[523],{2523:function(at,Q,s){s.r(Q),s.d(Q,{GuestLayoutModule:function(){return z}});var f=s(3144),m=s(5671),v=s(2619),A=s(9808),g=s(2382),t=s(8003),T=s(520),P=function(){var e=function(){function i(a){(0,m.Z)(this,i),this.http=a}return(0,f.Z)(i,[{key:"query",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.http.post("http://localhost/graphql/guest",{query:r,variables:o,operationName:n},{headers:new T.WM({accept:"application/json","content-type":"application/json"})})}}]),i}();return e.\u0275fac=function(a){return new(a||e)(t.LFG(T.eN))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e}(),y=function(i){return{"alphabet-active":i}},Z=function(){return["/guest/artists"]},q=function(i){return{chr:i}};function S(e,i){if(1&e&&(t.TgZ(0,"a",13),t._uU(1),t.qZA()),2&e){var a=i.index,r=t.oxw();t.Q6J("ngClass",t.VKq(4,y,r.chr===r.getAlphabetLetter(a,!1)))("routerLink",t.DdM(6,Z))("queryParams",t.VKq(7,q,r.getAlphabetLetter(a,!1))),t.xp6(1),t.hij(" ",r.getAlphabetLetter(a,!0)," ")}}var C=function(i,a){return{chr:i,page:a}};function J(e,i){if(1&e&&(t.TgZ(0,"a",15),t._uU(1," < PREV "),t.qZA()),2&e){var a=t.oxw(2);t.Q6J("queryParams",t.WLB(1,C,a.chr,a.page-1))}}var b=function(i){return{"pagination-link-active":i}};function M(e,i){if(1&e&&(t.ynx(0),t.TgZ(1,"a",21),t._uU(2),t.qZA(),t.BQk()),2&e){var a=i.$implicit,r=t.oxw(2);t.xp6(1),t.Q6J("queryParams",t.WLB(3,C,r.chr,a))("ngClass",t.VKq(6,b,a===r.page)),t.xp6(1),t.hij(" ",a," ")}}function x(e,i){if(1&e&&(t.TgZ(0,"a",15),t._uU(1," NEXT > "),t.qZA()),2&e){var a=t.oxw(2);t.Q6J("queryParams",t.WLB(1,C,a.chr,a.page+1))}}var _=function(i){return{chr:i,page:1}};function k(e,i){if(1&e){var a=t.EpF();t.TgZ(0,"p",14)(1,"a",15),t._uU(2," |< FIRST "),t.qZA(),t.YNc(3,J,2,4,"a",16),t.YNc(4,M,3,8,"ng-container",17),t.YNc(5,x,2,4,"a",16),t.TgZ(6,"a",15),t._uU(7," LAST |> "),t.qZA(),t._uU(8," Jump to page "),t.TgZ(9,"input",18),t.NdJ("change",function(){return t.CHM(a),t.oxw().jumpToPage()})("ngModelChange",function(n){return t.CHM(a),t.oxw().pageJump=n}),t.qZA(),t._uU(10),t._UZ(11,"br"),t.TgZ(12,"span",19)(13,"a",20),t._uU(14),t.qZA(),t._uU(15," to "),t.TgZ(16,"a",20),t._uU(17),t.qZA()()()}if(2&e){var r=t.oxw();t.xp6(1),t.Q6J("queryParams",t.VKq(12,_,r.chr)),t.xp6(2),t.Q6J("ngIf",r.graphQLArtists.data.artists.pageInfo.hasPreviousPage),t.xp6(1),t.Q6J("ngForOf",r.pages),t.xp6(1),t.Q6J("ngIf",r.graphQLArtists.data.artists.pageInfo.hasNextPage),t.xp6(1),t.Q6J("queryParams",t.WLB(14,C,r.chr,r.maxPage)),t.xp6(3),t.s9C("max",r.maxPage),t.Q6J("ngModel",r.pageJump),t.xp6(1),t.hij(" of ",r.maxPage," "),t.xp6(3),t.MGl("routerLink","/guest/artist/",r.graphQLArtists.data.artists.edges[0].node.id,""),t.xp6(1),t.hij(" ",r.graphQLArtists.data.artists.edges[0].node.name," "),t.xp6(2),t.MGl("routerLink","/guest/artist/",r.graphQLArtists.data.artists.edges[r.graphQLArtists.data.artists.edges.length-1].node.id,""),t.xp6(1),t.hij(" ",r.graphQLArtists.data.artists.edges[r.graphQLArtists.data.artists.edges.length-1].node.name," ")}}function U(e,i){1&e&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",2)(3,"div",3),t._uU(4," No results found "),t.qZA()()()())}function N(e,i){if(1&e&&(t.TgZ(0,"a",26),t._uU(1),t.qZA()),2&e){var a=i.$implicit;t.MGl("href","/guest/artist/",a.node.id,"",t.LSH),t.xp6(1),t.hij("",a.node.name," ")}}function F(e,i){if(1&e&&(t.TgZ(0,"a",26),t._uU(1),t.qZA()),2&e){var a=i.$implicit;t.MGl("href","/guest/artist/",a.node.id,"",t.LSH),t.xp6(1),t.hij("",a.node.name," ")}}function G(e,i){if(1&e&&(t.TgZ(0,"a",26),t._uU(1),t.qZA()),2&e){var a=i.$implicit;t.MGl("href","/guest/artist/",a.node.id,"",t.LSH),t.xp6(1),t.hij("",a.node.name," ")}}function I(e,i){if(1&e&&(t.TgZ(0,"div",22)(1,"div",23)(2,"div",2)(3,"div",24),t.YNc(4,N,2,2,"a",25),t.qZA(),t.TgZ(5,"div",24),t.YNc(6,F,2,2,"a",25),t.qZA(),t.TgZ(7,"div",24),t.YNc(8,G,2,2,"a",25),t.qZA()()()()),2&e){var a=t.oxw();t.xp6(4),t.Q6J("ngForOf",a.column(1)),t.xp6(2),t.Q6J("ngForOf",a.column(2)),t.xp6(2),t.Q6J("ngForOf",a.column(3))}}var O=function(){return{chr:"top100"}},j=function(){return[]},w=function(){return{chr:"other"}},Y=function(){var e=function(){function i(a,r,o){var n=this;(0,m.Z)(this,i),this.activatedRoute=a,this.guestGraphQLService=r,this.router=o,this.query='\n    query ArtistList($chr: String = "a", $after: String = "LTE=") {\n      artists (filter: { name_sort: "ASC", name_startswith: $chr, _after: $after }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  ',this.top100query='\n    {\n      artists (filter: { name_sort: "ASC", top100: true }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n    ',this.otherQuery='\n    query ArtistList($after: String = "LTE=") {\n      artists (filter: { name_sort: "ASC", _after: $after }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  ',this.filterQuery='\n    query ArtistList($filter: String = "a", $after: String = "LTE=") {\n      artists (filter: { name_sort: "ASC", name_contains: $filter, _after: $after }) {\n        totalCount\n        pageInfo {\n          hasPreviousPage\n          hasNextPage\n        }\n        edges {\n          cursor\n          node {\n            id\n            name\n          }\n        }\n      }\n    }\n  ',this.chr="top100",this.page=1,this.pages=[],this.maxPage=1,this.pageJump=1,this.filterString="",this.activatedRoute.queryParamMap.subscribe(function(u){n.graphQLArtists=null,u.get("chr")&&(n.chr=u.get("chr")),n.page=u.get("page")?Number(u.get("page")):1,u.get("filterString")?(n.chr="filter",n.filterString=u.get("filterString")):n.filterString="",n.pageJump=n.page;var p={},l="";switch(n.chr){case"filter":p.filter=n.filterString,p.after=btoa(String(300*(n.page-1)-1)),l=n.filterQuery;break;case"top100":l=n.top100query;break;case"other":p._artists_other=!0,p.after=btoa(String(300*(n.page-1)-1)),l=n.otherQuery;break;default:p.chr=n.chr,p.after=btoa(String(300*(n.page-1)-1)),l=n.query}n.guestGraphQLService.query(l,p).subscribe(function(L){n.graphQLArtists=L,n.pages=[];for(var h=n.page;h>=n.page-2;h--)h&&h>0&&n.pages.push(h);for(var d=n.page+1;d<=n.page+4;d++)300*Math.ceil(L.data.artists.totalCount/300)-300*d>=0&&!n.pages.includes(d)&&n.pages.length<5&&n.pages.push(d);for(var c=n.page;c>5&&(300*Math.ceil(L.data.artists.totalCount/300)-300*c>=0&&c>=1&&!n.pages.includes(c)&&n.pages.length<5&&n.pages.push(c),5!==n.pages.length);c--);n.maxPage=Math.ceil(L.data.artists.totalCount/300),n.pages.sort(function(tt,et){return tt-et})})})}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){}},{key:"jumpToPage",value:function(){this.pageJump>this.maxPage&&(this.pageJump=this.maxPage),this.pageJump<1&&(this.pageJump=1),this.router.navigate(["/guest/artists"],{queryParams:{chr:this.chr,page:this.pageJump,filterString:this.filterString}})}},{key:"filter",value:function(){this.router.navigate(["/guest/artists"],{queryParams:{chr:"filter",filterString:this.filterString}})}},{key:"column",value:function(r){var n=Math.ceil(this.graphQLArtists.data.artists.edges.length/3);switch(r){case 1:return this.graphQLArtists.data.artists.edges.slice(0,n);case 2:return this.graphQLArtists.data.artists.edges.slice(n,2*n);case 3:return this.graphQLArtists.data.artists.edges.slice(2*n)}}},{key:"getAlphabetLetter",value:function(r){var o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=o?65:97;return String.fromCharCode(r+n)}}]),i}();return e.\u0275fac=function(a){return new(a||e)(t.Y36(v.gz),t.Y36(P),t.Y36(v.F0))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-artists"]],decls:19,vars:20,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"alphabet",3,"routerLink","queryParams","ngClass"],["class","alphabet",3,"ngClass","routerLink","queryParams",4,"ngFor","ngForOf"],[1,"alphabet-link"],["type","text",2,"width","15em",3,"ngModel","change","ngModelChange"],["class","card-category",4,"ngIf"],["class","card-body",4,"ngIf"],[1,"alphabet",3,"ngClass","routerLink","queryParams"],[1,"card-category"],["routerLink","/guest/artists",1,"pagination-link",3,"queryParams"],["routerLink","/guest/artists","class","pagination-link",3,"queryParams",4,"ngIf"],[4,"ngFor","ngForOf"],["type","number","min","1",2,"width","3em",3,"max","ngModel","change","ngModelChange"],[1,"pagination-link"],[3,"routerLink"],["routerLink","/guest/artists",1,"pagination-link",3,"queryParams","ngClass"],[1,"card-body"],[1,"container"],[1,"col-md-4"],["style","display: block",3,"href",4,"ngFor","ngForOf"],[2,"display","block",3,"href"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p",6)(7,"a",7),t._uU(8," top 100 "),t.qZA(),t.YNc(9,S,2,9,"a",8),t.TgZ(10,"a",7),t._uU(11," other "),t.qZA(),t._UZ(12,"br"),t.TgZ(13,"span",9),t._uU(14," Filter "),t.TgZ(15,"input",10),t.NdJ("change",function(){return r.filter()})("ngModelChange",function(n){return r.filterString=n}),t.qZA()()(),t.YNc(16,k,18,17,"p",11),t.qZA(),t.YNc(17,U,5,0,"div",12),t.YNc(18,I,9,3,"div",12),t.qZA()()()()()),2&a&&(t.xp6(7),t.Q6J("routerLink",t.DdM(11,Z))("queryParams",t.DdM(12,O))("ngClass",t.VKq(13,y,"top100"===r.chr)),t.xp6(2),t.Q6J("ngForOf",t.DdM(15,j).constructor(26)),t.xp6(1),t.Q6J("routerLink",t.DdM(16,Z))("queryParams",t.DdM(17,w))("ngClass",t.VKq(18,y,"other"===r.chr)),t.xp6(5),t.Q6J("ngModel",r.filterString),t.xp6(1),t.Q6J("ngIf",r.graphQLArtists&&(r.graphQLArtists.data.artists.pageInfo.hasNextPage||r.graphQLArtists.data.artists.pageInfo.hasPreviousPage)),t.xp6(1),t.Q6J("ngIf",r.graphQLArtists&&!r.graphQLArtists.data.artists.totalCount),t.xp6(1),t.Q6J("ngIf",r.graphQLArtists&&r.graphQLArtists.data.artists.totalCount))},directives:[v.yS,A.mk,A.sg,g.Fj,g.JJ,g.On,A.O5,g.qQ,g.Fd,g.wV],styles:[".alphabet[_ngcontent-%COMP%]{padding-right:1em;font-weight:700}.alphabet-active[_ngcontent-%COMP%]{text-decoration:underline}.pagination-link[_ngcontent-%COMP%]{padding-right:1em}.pagination-link-active[_ngcontent-%COMP%]{text-decoration:underline}"]}),e}(),H=[{component:function(){var e=function(){function i(){(0,m.Z)(this,i)}return(0,f.Z)(i,[{key:"ngOnInit",value:function(){}}]),i}();return e.\u0275fac=function(a){return new(a||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-home"]],decls:17,vars:0,consts:[[1,"main-content"],[1,"container-fluid"],[1,"row"],[1,"col-md-12"],[1,"card"],[1,"card-header","card-header-danger"],[1,"card-title"],[1,"card-body"],["href","https://etreedb.org"]],template:function(a,r){1&a&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"h4",6),t._uU(7," Welcome to the Live Concert Database [LCDB]. "),t.qZA()(),t.TgZ(8,"div",7)(9,"p"),t._uU(10," This website will replace "),t.TgZ(11,"a",8),t._uU(12,"etreedb.org"),t.qZA(),t._uU(13," in time. While this process is taking place this website will use the exact same database as "),t.TgZ(14,"a",8),t._uU(15,"etreedb.org"),t.qZA(),t._uU(16," so all changes on each site will be reflected in each other. "),t.qZA()()()()()()())},styles:[""]}),e}(),path:"home"},{component:Y,path:"artists"}],D=s(7423),V=s(7531),B=s(508),W=s(7322),E=s(9772),K=s(4107),z=function(){var e=(0,f.Z)(function i(){(0,m.Z)(this,i)});return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[A.ez,v.Bz.forChild(H),g.u5,g.UX,D.ot,B.si,W.lN,V.c,K.LD,E.AV]]}),e}()}}]);